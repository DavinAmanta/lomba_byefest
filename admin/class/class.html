<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Data Kelas</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../shared/style.css" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f9fa;
    }
    .table thead th {
      background-color: #2c3e50;
      color: white;
    }
    .modal-header {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom:hover {
      background-color: #1a252f;
    }
    .table td, .table th {
      vertical-align: middle;
    }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2>Admin Bimbel</h2>
  <a href="../dashboard/dashboard.html">📊 Dashboard</a>
  <a href="../student/student.html">👩‍🎓 Data Siswa</a>
  <a href="../teacher/teacher.html">👨‍🏫 Data Guru</a>
  <a href="../class/class.html" class="active">🏫 Data Kelas</a>
  <a href="../tryout/tryout.html">📝 Try Out</a>
  <a href="../book/book.html">📚 Buku</a>
  <a href="../latihan/latihan.html">🧠 Latihan Soal</a>
</div>

<!-- Main -->
<div class="main">
  <div class="navbar">
    <div class="navbar-left">🏫 Data Kelas</div>
    <div class="profile" onclick="toggleDropdown()">
      <img src="https://i.pravatar.cc/150?img=14" alt="Profil Admin">
    </div>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="../../login_admin/loginadmin.html" class="logout">🚪 Logout</a>
    </div>
  </div>

  <div class="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4>🏫 Daftar Kelas</h4>
      <button class="btn btn-custom" data-bs-toggle="modal" data-bs-target="#modalTambah">
        <i class="fas fa-plus me-1"></i> Tambah Kelas
      </button>
    </div>

    <table class="table table-bordered table-hover table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Nama Kelas</th>
          <th>Wali Kelas</th>
          <th class="text-center">Aksi</th>
        </tr>
      </thead>
      <tbody id="tableKelas"></tbody>
    </table>
  </div>
</div>

<!-- Modal Tambah Kelas -->
<div class="modal fade" id="modalTambah" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formTambah">
        <div class="modal-header">
          <h5 class="modal-title">Tambah Kelas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Nama Kelas</label>
            <input type="text" class="form-control" id="namaKelas" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Wali Kelas</label>
            <input type="text" class="form-control" id="waliKelas" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Simpan</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Edit Kelas -->
<div class="modal fade" id="modalEdit" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formEdit">
        <div class="modal-header">
          <h5 class="modal-title">Edit Kelas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editIndex">
          <div class="mb-3">
            <label class="form-label">Nama Kelas</label>
            <input type="text" class="form-control" id="editNamaKelas" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Wali Kelas</label>
            <input type="text" class="form-control" id="editWaliKelas" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Perbarui</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  let kelasList = [
    { nama: "10 IPA 1", wali: "Bu Rina" },
    { nama: "11 IPS 2", wali: "Pak Dedi" },
    { nama: "12 IPA 3", wali: "Bu Lia" }
  ];

  function renderTable() {
    const table = document.getElementById("tableKelas");
    table.innerHTML = "";
    kelasList.forEach((kelas, index) => {
      table.innerHTML += `
        <tr>
          <td>${index + 1}</td>
          <td>${kelas.nama}</td>
          <td>${kelas.wali}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-warning me-2" onclick="editKelas(${index})"><i class="fas fa-edit"></i></button>
            <button class="btn btn-sm btn-danger" onclick="hapusKelas(${index})"><i class="fas fa-trash-alt"></i></button>
          </td>
        </tr>
      `;
    });
  }

  document.getElementById("formTambah").addEventListener("submit", function(e) {
    e.preventDefault();
    const nama = document.getElementById("namaKelas").value;
    const wali = document.getElementById("waliKelas").value;
    kelasList.push({ nama, wali });
    renderTable();
    this.reset();
    bootstrap.Modal.getInstance(document.getElementById("modalTambah")).hide();
  });

  function editKelas(index) {
    const kelas = kelasList[index];
    document.getElementById("editIndex").value = index;
    document.getElementById("editNamaKelas").value = kelas.nama;
    document.getElementById("editWaliKelas").value = kelas.wali;
    new bootstrap.Modal(document.getElementById("modalEdit")).show();
  }

  document.getElementById("formEdit").addEventListener("submit", function(e) {
    e.preventDefault();
    const index = document.getElementById("editIndex").value;
    kelasList[index] = {
      nama: document.getElementById("editNamaKelas").value,
      wali: document.getElementById("editWaliKelas").value
    };
    renderTable();
    bootstrap.Modal.getInstance(document.getElementById("modalEdit")).hide();
  });

  function hapusKelas(index) {
    if (confirm("Yakin ingin menghapus kelas ini?")) {
      kelasList.splice(index, 1);
      renderTable();
    }
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
  }

  window.onclick = function(e) {
    const profile = document.querySelector('.profile');
    const dropdown = document.getElementById('dropdownMenu');
    if (!profile.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = 'none';
    }
  }

  renderTable();
</script>

</body>
</html>
