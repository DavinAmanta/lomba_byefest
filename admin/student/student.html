<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Data Siswa</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../shared/style.css" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f9fa;
    }
    .table thead th {
      background-color: #2c3e50;
      color: white;
    }
    .modal-header {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom:hover {
      background-color: #1a252f;
    }
    .table td, .table th {
      vertical-align: middle;
    }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2>Admin Bimbel</h2>
  <a href="../dashboard/dashboard.html">ğŸ“Š Dashboard</a>
  <a href="../student/student.html" class="active">ğŸ‘©â€ğŸ“ Data Siswa</a>
  <a href="../teacher/teacher.html">ğŸ‘¨â€ğŸ« Data Guru</a>
  <a href="../class/class.html">ğŸ« Data Kelas</a>
  <a href="../tryout/tryout.html">ğŸ“ Try Out</a>
  <a href="../book/book.html">ğŸ“š Buku</a>
  <a href="../latihan/latihan.html">ğŸ§  Latihan Soal</a>
</div>

<!-- Main -->
<div class="main">
  <div class="navbar">
    <div class="navbar-left">ğŸ‘©â€ğŸ“ Data Siswa</div>
    <div class="profile" onclick="toggleDropdown()">
      <img src="https://i.pravatar.cc/150?img=14" alt="Profil Admin">
    </div>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="../../login_admin/loginadmin.html" class="logout">ğŸšª Logout</a>
    </div>
  </div>

  <div class="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4>ğŸ‘©â€ğŸ“ Daftar Siswa</h4>
      <button class="btn btn-custom" data-bs-toggle="modal" data-bs-target="#modalTambah">
        <i class="fas fa-plus me-1"></i> Tambah Siswa
      </button>
    </div>

    <table class="table table-bordered table-hover table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Nama</th>
          <th>NIS</th>
          <th>Kelas</th>
          <th class="text-center">Aksi</th>
        </tr>
      </thead>
      <tbody id="tableSiswa"></tbody>
    </table>
  </div>
</div>

<!-- Modal Tambah Siswa -->
<div class="modal fade" id="modalTambah" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formTambah">
        <div class="modal-header">
          <h5 class="modal-title">Tambah Siswa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Nama</label>
            <input type="text" class="form-control" id="nama" required>
          </div>
          <div class="mb-3">
            <label class="form-label">NIS</label>
            <input type="text" class="form-control" id="nis" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Kelas</label>
            <input type="text" class="form-control" id="kelas" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Simpan</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Edit Siswa -->
<div class="modal fade" id="modalEdit" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formEdit">
        <div class="modal-header">
          <h5 class="modal-title">Edit Siswa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editIndex">
          <div class="mb-3">
            <label class="form-label">Nama</label>
            <input type="text" class="form-control" id="editNama" required>
          </div>
          <div class="mb-3">
            <label class="form-label">NIS</label>
            <input type="text" class="form-control" id="editNis" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Kelas</label>
            <input type="text" class="form-control" id="editKelas" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Perbarui</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  let siswaList = [
    { nama: "Rina Putri", nis: "22001", kelas: "10 IPA 1" },
    { nama: "Dedi Gunawan", nis: "22002", kelas: "11 IPS 2" },
    { nama: "Lia Kurnia", nis: "22003", kelas: "12 IPA 3" }
  ];

  function renderTable() {
    const table = document.getElementById("tableSiswa");
    table.innerHTML = "";
    siswaList.forEach((siswa, index) => {
      table.innerHTML += `
        <tr>
          <td>${index + 1}</td>
          <td>${siswa.nama}</td>
          <td>${siswa.nis}</td>
          <td>${siswa.kelas}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-warning me-2" onclick="editSiswa(${index})"><i class="fas fa-edit"></i></button>
            <button class="btn btn-sm btn-danger" onclick="hapusSiswa(${index})"><i class="fas fa-trash-alt"></i></button>
          </td>
        </tr>
      `;
    });
  }

  document.getElementById("formTambah").addEventListener("submit", function(e) {
    e.preventDefault();
    const nama = document.getElementById("nama").value;
    const nis = document.getElementById("nis").value;
    const kelas = document.getElementById("kelas").value;
    siswaList.push({ nama, nis, kelas });
    renderTable();
    this.reset();
    bootstrap.Modal.getInstance(document.getElementById("modalTambah")).hide();
  });

  function editSiswa(index) {
    const siswa = siswaList[index];
    document.getElementById("editIndex").value = index;
    document.getElementById("editNama").value = siswa.nama;
    document.getElementById("editNis").value = siswa.nis;
    document.getElementById("editKelas").value = siswa.kelas;
    new bootstrap.Modal(document.getElementById("modalEdit")).show();
  }

  document.getElementById("formEdit").addEventListener("submit", function(e) {
    e.preventDefault();
    const index = document.getElementById("editIndex").value;
    siswaList[index] = {
      nama: document.getElementById("editNama").value,
      nis: document.getElementById("editNis").value,
      kelas: document.getElementById("editKelas").value
    };
    renderTable();
    bootstrap.Modal.getInstance(document.getElementById("modalEdit")).hide();
  });

  function hapusSiswa(index) {
    if (confirm("Yakin ingin menghapus siswa ini?")) {
      siswaList.splice(index, 1);
      renderTable();
    }
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
  }

  window.onclick = function(e) {
    const profile = document.querySelector('.profile');
    const dropdown = document.getElementById('dropdownMenu');
    if (!profile.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = 'none';
    }
  }

  renderTable();
</script>

</body>
</html>
