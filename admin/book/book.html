<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Data Buku</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../shared/style.css" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f9fa;
    }
    .table thead th {
      background-color: #2c3e50;
      color: white;
    }
    .modal-header {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom {
      background-color: #2c3e50;
      color: white;
    }
    .btn-custom:hover {
      background-color: #1a252f;
    }
    .table td, .table th {
      vertical-align: middle;
    }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2>Admin Bimbel</h2>
  <a href="../dashboard/dashboard.html">ğŸ“Š Dashboard</a>
  <a href="../student/student.html">ğŸ‘©â€ğŸ“ Data Siswa</a>
  <a href="../teacher/teacher.html">ğŸ‘¨â€ğŸ« Data Guru</a>
  <a href="../class/class.html">ğŸ« Data Kelas</a>
  <a href="../tryout/tryout.html">ğŸ“ Try Out</a>
  <a href="../book/book.html" class="active">ğŸ“š Buku</a>
  <a href="../latihan/latihan.html">ğŸ§  Latihan Soal</a>
</div>

<!-- Main -->
<div class="main">
  <div class="navbar">
    <div class="navbar-left">ğŸ“š Data Buku</div>
    <div class="profile" onclick="toggleDropdown()">
      <img src="https://i.pravatar.cc/150?img=12" alt="Profil Admin">
    </div>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="../../login_admin/loginadmin.html" class="logout">ğŸšª Logout</a>
    </div>
  </div>

  <div class="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4>ğŸ“š Daftar Buku Bimbel</h4>
      <button class="btn btn-custom" data-bs-toggle="modal" data-bs-target="#modalTambah">
        <i class="fas fa-plus me-1"></i> Tambah Buku
      </button>
    </div>

    <table class="table table-bordered table-hover table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Judul</th>
          <th>Penulis</th>
          <th>Penerbit</th>
          <th class="text-center">Aksi</th>
        </tr>
      </thead>
      <tbody id="tableBuku"></tbody>
    </table>
  </div>
</div>

<!-- Modal Tambah Buku -->
<div class="modal fade" id="modalTambah" tabindex="-1" aria-labelledby="modalTambahLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formTambah">
        <div class="modal-header">
          <h5 class="modal-title">Tambah Buku</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Judul</label>
            <input type="text" class="form-control" id="judul" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Penulis</label>
            <input type="text" class="form-control" id="penulis" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Penerbit</label>
            <input type="text" class="form-control" id="penerbit" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Simpan</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Edit Buku -->
<div class="modal fade" id="modalEdit" tabindex="-1" aria-labelledby="modalEditLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="formEdit">
        <div class="modal-header">
          <h5 class="modal-title">Edit Buku</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editIndex">
          <div class="mb-3">
            <label class="form-label">Judul</label>
            <input type="text" class="form-control" id="editJudul" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Penulis</label>
            <input type="text" class="form-control" id="editPenulis" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Penerbit</label>
            <input type="text" class="form-control" id="editPenerbit" required>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-custom">Perbarui</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  let bukuList = [
    { judul: "Panduan Sukses UTBK", penulis: "Agus Setiawan", penerbit: "Bimbel Pintar" },
    { judul: "Matematika Dasar UTBK", penulis: "Dewi Rahayu", penerbit: "Eduka" },
    { judul: "Strategi TPA & TPS", penulis: "Rudi Hartono", penerbit: "Cerdas Bangsa" }
  ];

  function renderTable() {
    const table = document.getElementById("tableBuku");
    table.innerHTML = "";
    bukuList.forEach((buku, index) => {
      table.innerHTML += `
        <tr>
          <td>${index + 1}</td>
          <td>${buku.judul}</td>
          <td>${buku.penulis}</td>
          <td>${buku.penerbit}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-warning me-2" onclick="editBuku(${index})">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-danger" onclick="hapusBuku(${index})">
              <i class="fas fa-trash-alt"></i>
            </button>
          </td>
        </tr>
      `;
    });
  }

  document.getElementById("formTambah").addEventListener("submit", function(e) {
    e.preventDefault();
    const judul = document.getElementById("judul").value;
    const penulis = document.getElementById("penulis").value;
    const penerbit = document.getElementById("penerbit").value;
    bukuList.push({ judul, penulis, penerbit });
    renderTable();
    this.reset();
    bootstrap.Modal.getInstance(document.getElementById("modalTambah")).hide();
  });

  function editBuku(index) {
    const buku = bukuList[index];
    document.getElementById("editIndex").value = index;
    document.getElementById("editJudul").value = buku.judul;
    document.getElementById("editPenulis").value = buku.penulis;
    document.getElementById("editPenerbit").value = buku.penerbit;
    new bootstrap.Modal(document.getElementById("modalEdit")).show();
  }

  document.getElementById("formEdit").addEventListener("submit", function(e) {
    e.preventDefault();
    const index = document.getElementById("editIndex").value;
    bukuList[index] = {
      judul: document.getElementById("editJudul").value,
      penulis: document.getElementById("editPenulis").value,
      penerbit: document.getElementById("editPenerbit").value
    };
    renderTable();
    bootstrap.Modal.getInstance(document.getElementById("modalEdit")).hide();
  });

  function hapusBuku(index) {
    if (confirm("Yakin ingin menghapus buku ini?")) {
      bukuList.splice(index, 1);
      renderTable();
    }
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
  }

  window.onclick = function(e) {
    const profile = document.querySelector('.profile');
    const dropdown = document.getElementById('dropdownMenu');
    if (!profile.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = 'none';
    }
  }

  // render awal
  renderTable();
</script>

</body>
</html>
